!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("react"),require("dijit/registry"),require("mendix/lang"));else if("function"==typeof define&&define.amd)define(["react","dijit/registry","mendix/lang"],e);else{var i="object"==typeof exports?e(require("react"),require("dijit/registry"),require("mendix/lang")):e(t.react,t["dijit/registry"],t["mendix/lang"]);for(var r in i)("object"==typeof exports?exports:t)[r]=i[r]}}(window,function(t,e,i){return function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=9)}([function(e,i){e.exports=t},function(t,e,i){var r;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";var i={}.hasOwnProperty;function n(){for(var t=[],e=0;e<arguments.length;e++){var r=arguments[e];if(r){var o=typeof r;if("string"===o||"number"===o)t.push(r);else if(Array.isArray(r)&&r.length){var s=n.apply(null,r);s&&t.push(s)}else if("object"===o)for(var a in r)i.call(r,a)&&r[a]&&t.push(a)}}return t.join(" ")}void 0!==t&&t.exports?(n.default=n,t.exports=n):void 0===(r=function(){return n}.apply(e,[]))||(t.exports=r)}()},function(t,e,i){var r;void 0===(r=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.paginationTopicSuffix="_paginationUpdate";var i=function(){function t(){}return t.parseStyle=function(t){void 0===t&&(t="");try{return t.split(";").reduce(function(t,e){var i=e.split(":");2===i.length&&(t[i[0].trim().replace(/(-.)/g,function(t){return t[1].toUpperCase()})]=i[1].trim());return t},{})}catch(e){window.console.log("Failed to parse style",t,e)}return{}},t.validateCompatibility=function(t){var e=t.listViewEntity,i=t.targetListView,r=i&&i.datasource&&i.datasource.type;if(!i){var n="This widget is unable to find a list view ";return n+=e?"with the supplied entity '"+e+"'":"to connect"}return r&&"database"!==r&&"xpath"!==r?"This widget is only compatible with list view data source type 'Database' and 'XPath'":i&&i._datasource&&i._entity&&i.update?i._entity&&e!==i._entity?'The supplied entity "'+t.listViewEntity+'" does not belong to list view data source':"":"This widget version is not compatible with this Mendix version"},t.findTargetNode=function(t){for(var e=null;!e&&t&&!((e=t.querySelectorAll(".mx-listview")[0])||t.isEqualNode(document)||!t.classList||t.classList.contains("mx-incubator")||t.classList.contains("mx-offscreen"));)t=t.parentNode;return e},t}();e.SharedUtils=i}.apply(e,[i,e]))||(t.exports=r)},function(t,e,i){var r,n;r=[i,e,i(4)],void 0===(n=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.findTargetListView=function(t,e){for(var r;t;){var n=t.querySelectorAll(".mx-listview");if(t.isEqualNode(document)||!t.classList||t.classList.contains("mx-incubator")||t.classList.contains("mx-offscreen"))break;for(var o=0;o<n.length;o++){if((r=i.byNode(n.item(o)))&&!e)return r;if(r&&r._entity===e)return r}t=t.parentNode}return r},t}();e.SharedContainerUtils=r}.apply(e,r))||(t.exports=n)},function(t,i){t.exports=e},function(t,e){t.exports=i},function(t,e,i){var r,n;r=[i,e,i(0),i(1)],void 0===(n=function(t,e,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Alert=function(t){var e=t.bootstrapStyle,n=t.className,o=t.children;return o?i.createElement("div",{className:r("alert alert-"+e,n)},o):null},e.Alert.displayName="Alert",e.Alert.defaultProps={bootstrapStyle:"danger"}}.apply(e,r))||(t.exports=n)},function(t,e,i){var r,n;r=[i,e,i(2),i(3),i(31)],void 0===(n=function(t,e,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.initialLoad=!0,this.delay=50,this.store={constraints:{_none:{}},sorting:{}},this.updateInProgress=!1,this.requiresUpdate=!1,this.widget=t}return t.getInstance=function(e,n){var o=r.SharedContainerUtils.findTargetListView(e,n),s=i.SharedUtils.validateCompatibility({listViewEntity:n,targetListView:o});if(!s)return o.__customWidgetDataSourceHelper||(o.__customWidgetDataSourceHelper=new t(o)),o.__customWidgetDataSourceHelper.initialLoad=!0,this.hideContent(o.domNode),o.__customWidgetDataSourceHelper;throw new Error(s)},t.prototype.setSorting=function(t,e){this.store.sorting={},this.store.sorting[t]=e,this.registerUpdate()},t.prototype.setConstraint=function(t,e,i){var r;void 0===i&&(i="_none");var n=i.trim()||"_none";this.store.constraints[n]?this.store.constraints[n][t]=e:this.store.constraints[n]=((r={})[t]=e,r),this.registerUpdate()},t.prototype.getListView=function(){return this.widget},t.prototype.registerUpdate=function(){var t=this;this.timeoutHandle&&window.clearTimeout(this.timeoutHandle),this.updateInProgress?this.requiresUpdate=!0:this.timeoutHandle=window.setTimeout(function(){t.updateInProgress=!0,t.iterativeUpdateDataSource()},this.delay)},t.prototype.iterativeUpdateDataSource=function(){var t=this;this.updateDataSource(function(){t.requiresUpdate?(t.requiresUpdate=!1,t.iterativeUpdateDataSource()):t.updateInProgress=!1})},t.prototype.updateDataSource=function(t){var e=this,i=[],r=Object.keys(this.store.sorting).map(function(t){return e.store.sorting[t]}).filter(function(t){return t[0]&&t[1]});if(r.length||this.widget._datasource._sorting.forEach(function(t){return r.push(t)}),window.mx.isOffline()){for(var n=Object.keys(this.store.constraints._none).map(function(t){return e.store.constraints._none[t]}),o=n.filter(function(t){return t.value}),s=n.filter(function(t){return t.operator}),a=[],u=0,c=Object.keys(this.store.constraints).filter(function(t){return"_none"!==t});u<c.length;u++){for(var l=c[u],p=[],d=0,h=Object.keys(this.store.constraints[l]);d<h.length;d++){var f=h[d],y=this.store.constraints[l][f];y&&y.value&&p.push(y)}p.length&&a.push({constraints:p,operator:"or"})}i=o.concat(s,a)}else{i=(o=Object.keys(this.store.constraints._none).map(function(t){return e.store.constraints._none[t]}).join(""))+(a=Object.keys(this.store.constraints).filter(function(t){return"_none"!==t}).map(function(t){return"["+Object.keys(e.store.constraints[t]).map(function(i){return e.store.constraints[t][i]}).filter(function(t){return t}).map(function(t){return t.trim().substr(1,t.trim().length-2)}).join(" or ")+"]"}).join("").replace(/\[]/g,""))}this.widget._datasource._constraints=i,this.widget._datasource[window.mx.isOffline()?"_sort":"_sorting"]=r,this.initialLoad||this.showLoader(),this.widget.update(null,function(){e.hideLoader(),e.initialLoad=!1,t()})},t.prototype.showLoader=function(){this.widget.domNode.classList.add("widget-data-source-helper-loading")},t.hideContent=function(t){t&&t.classList.add("widget-data-source-helper-initial-loading")},t.showContent=function(t){t&&t.classList.remove("widget-data-source-helper-initial-loading")},t.prototype.hideLoader=function(){this.widget.domNode.classList.remove("widget-data-source-helper-loading"),t.showContent(this.widget.domNode)},t}();e.DataSourceHelper=n}.apply(e,r))||(t.exports=n)},,function(t,e,i){var r,n,o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();r=[i,e,i(0),i(1),i(5),i(6),i(7),i(2),i(10),i(11),i(3)],void 0===(n=function(t,e,i,r,n,s,a,u,c,l,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d=function(t){function e(e){var i=t.call(this,e)||this;return i.state={listViewAvailable:!1,alertMessage:l.Validate.validateProps(i.props)},n.delay(i.connectToListView.bind(i),i.checkListViewAvailable.bind(i),20),i.applyFilter=i.applyFilter.bind(i),i}return o(e,t),e.prototype.render=function(){var t=this,e=this.state.alertMessage||l.Validate.validateProps(this.props);return i.createElement("div",{className:r("widget-checkbox-filter",this.props.class),ref:function(e){return t.widgetDOM=e},style:u.SharedUtils.parseStyle(this.props.style)},this.renderAlert(e),this.renderCheckBoxFilter(e))},e.prototype.componentDidUpdate=function(){this.state.listViewAvailable&&this.applyFilter(this.props.defaultChecked)},e.prototype.checkListViewAvailable=function(){return!!p.SharedContainerUtils.findTargetListView(this.widgetDOM.parentElement,this.props.listViewEntity)},e.prototype.renderAlert=function(t){return i.createElement(s.Alert,{className:"widget-checkbox-filter-alert"},t)},e.prototype.renderCheckBoxFilter=function(t){return t?null:i.createElement(c.CheckboxFilter,{handleChange:this.applyFilter,isChecked:this.props.defaultChecked})},e.prototype.applyFilter=function(t){this.dataSourceHelper&&this.dataSourceHelper.setConstraint(this.props.friendlyId,this.getConstraint(t),this.props.group)},e.prototype.getConstraint=function(t){var e=this.state.targetListView;if(e&&e._datasource){var i=t?this.props.attribute:this.props.unCheckedAttribute,r=t?this.props.filterBy:this.props.unCheckedFilterBy,n=t?this.props.constraint:this.props.unCheckedConstraint,o=t?this.props.attributeValue:this.props.unCheckedAttributeValue,s=this.props.mxObject?this.props.mxObject.getGuid():"",a=-1!==n.indexOf("'[%CurrentObject%]'");return"XPath"===r&&a&&s?n.replace(/\[%CurrentObject%\]/g,s):"XPath"!==r||a?"attribute"===r&&o?this.getAttributeConstraint(i,o):"":n}},e.prototype.getAttributeConstraint=function(t,e){var i=this.state.targetListView;if(window.mx.isOffline())return{attribute:t,operator:"contains",path:this.props.listViewEntity,value:e};if(i&&i._datasource&&e){var r=mx.meta.getEntity(this.props.listViewEntity);return r.isEnum(t)?"["+t+"='"+e+"']":r.isBoolean(t)?"["+t+" = '"+e.toLowerCase()+"']":"[contains("+t+",'"+e+"')]"}return""},e.prototype.connectToListView=function(){var t,e="";try{this.dataSourceHelper=a.DataSourceHelper.getInstance(this.widgetDOM.parentElement,this.props.listViewEntity),t=this.dataSourceHelper.getListView()}catch(t){e=t.message}e&&t&&a.DataSourceHelper.showContent(t.domNode),this.setState({alertMessage:e,listViewAvailable:!!t,targetListView:t})},e}(i.Component);e.default=d}.apply(e,r))||(t.exports=n)},function(t,e,i){var r,n,o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();r=[i,e,i(0),i(38)],void 0===(n=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var i=t.call(this,e)||this;return i.state={isChecked:i.props.isChecked},i.handleOnChange=i.handleOnChange.bind(i),i}return o(e,t),e.prototype.render=function(){return i.createElement("input",{checked:this.state.isChecked,defaultChecked:this.state.isChecked,onChange:this.handleOnChange,type:"checkbox"})},e.prototype.componentWillReceiveProps=function(t){this.state.isChecked!==t.isChecked&&this.setState({isChecked:t.isChecked})},e.prototype.handleOnChange=function(t){this.setState({isChecked:t.target.checked}),this.props.handleChange(t.target.checked)},e}(i.Component);e.CheckboxFilter=r}.apply(e,r))||(t.exports=n)},function(t,e,i){var r,n;r=[i,e,i(0)],void 0===(n=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.validateProps=function(t){var e=[];return"XPath"!==t.filterBy||t.constraint||e.push("The checked 'XPath constraint' is required when 'Filter by' is set to 'XPath'"),"attribute"!==t.filterBy||t.attribute||e.push("The checked 'Attribute' is required when 'Filter by' is set to 'Attribute'"),"attribute"!==t.filterBy||t.attributeValue||e.push("The checked 'Attribute value' is required when 'Filter by' is set to 'Attribute'"),"XPath"!==t.unCheckedFilterBy||t.unCheckedConstraint||e.push("The unchecked 'XPath constraint' is required when 'Filter by' is set to 'XPath'"),"attribute"!==t.unCheckedFilterBy||t.unCheckedAttribute||e.push("The unchecked 'Attribute' is required when 'Filter by' is set to 'Attribute'"),"attribute"!==t.unCheckedFilterBy||t.unCheckedAttributeValue||e.push("The unchecked 'Attribute value' is required when 'Filter by' is set to 'Attribute'"),t.isWebModeler||(window.mx.isOffline()&&"XPath"===t.filterBy&&e.push("The checked 'Filter by' 'XPath' is not supported for offline application"),window.mx.isOffline()&&"XPath"===t.unCheckedFilterBy&&e.push("The unchecked 'Filter by' 'XPath' is not supported for offline application"),!t.mxObject&&"XPath"===t.filterBy&&t.constraint.indexOf("[%CurrentObject%]'")>-1&&e.push("The checked 'XPath constraint', requires a context object"),!t.mxObject&&"XPath"===t.unCheckedFilterBy&&t.unCheckedConstraint.indexOf("[%CurrentObject%]'")>-1&&e.push("The unchecked 'XPath constraint', requires a context object")),e.length?i.createElement("div",{},"Configuration error in widget:",e.map(function(t,e){return i.createElement("p",{key:e},t)})):""},t}();e.Validate=r}.apply(e,r))||(t.exports=n)},,,,,,,,,,,,,,,,,,,,function(t,e){},,,,,,,function(t,e){}])});